#!/usr/bin/env ruby
# frozen_string_literal: true

require "pdf_links_checker"
require "pdf_links_checker/pdf_document"
require "pdf-reader"
require "net/http"

file_name = ARGV[0]
file_path = "#{Dir.pwd}/#{file_name}"

path = File.expand_path(file_path)
doc = PDF::Reader.new(path)

links = PdfLinksChecker::PdfDocument.new(doc).links

puts "Working links: #{links.valid_count} of #{links.total_count}"
links.invalid.each { |invalid_link| puts invalid_link }
